import React, { useEffect, useRef } from "react";

interface AuthBackgroundVectorProps {
  stroke?: string;
  strokeWidth?: number;
  className?: string;
  animate?: boolean;
  duration?: number; // segundos
}

export function LineBackground({
  stroke = "#FFCD6C",
  strokeWidth = 24,
  className,
  animate = true,
  duration = 5,
}: AuthBackgroundVectorProps) {
  const pathRef = useRef<SVGPathElement | null>(null);

  useEffect(() => {
    if (!animate || !pathRef.current) return;

    const path = pathRef.current;
    const length = path.getTotalLength();

    path.style.strokeDasharray = `${length}`;
    path.style.strokeDashoffset = `${length}`;

    // trigger animation
    path.getBoundingClientRect();

    path.style.transition = `stroke-dashoffset ${duration}s ease`;
    path.style.strokeDashoffset = "0";
  }, [animate, duration]);

  return (
    <svg
      viewBox="0 0 1259 966"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
    >
      <path
        ref={pathRef}
        d="M12 954.523C12 945.734 14.1585 916.582 18.2231 889.477C22.7671 859.176 73.3124 786.125 103.395 749.872C126.287 722.284 169.464 719.785 194.399 719.961C225.531 720.18 242.815 742.251 263.281 760.264C282.664 777.324 292.754 818.492 302.639 851.173C305.32 860.035 306.306 882.088 306.586 907.915C306.668 915.508 306.93 911.908 307.405 908.15C309.495 891.6 311.814 870.441 315.028 842.222C321.795 782.821 329.185 757.626 336.58 743.552C340.128 736.799 360.473 736.576 380.861 737.141C406.238 737.843 425.118 751.076 439.865 764.415C457.966 780.788 465.85 811.523 476.845 846.35C485.655 874.255 493.045 885.444 495.475 894.267C496.614 898.4 498.364 901.717 502.226 897.912C530.966 869.599 541.298 843.766 560.322 826.131C576.238 811.377 603.734 801.79 641.327 791.103C680.247 780.038 737.61 790.937 777.609 810.282C791.256 816.882 797.281 823.643 801.317 830.451C805.209 837.016 804.93 847.549 801.996 857.096C800.94 860.532 793.142 858.714 787.802 856.862C767.624 849.863 757.575 835.901 750.332 821.908C746.75 814.987 744.43 750.675 740.022 656.683C737.623 605.553 749.768 572.576 762.702 548.981C769.307 536.933 784.801 530.441 798.104 525.758C817.065 519.084 853.234 518.166 889.95 518.053C927.976 517.936 954.142 553.842 1002.23 622.191C1036.75 671.256 1031.69 717.483 1033.68 775.839C1034.51 800.18 1040.19 821.551 1043.45 840.539C1044.38 845.98 1044.65 852.504 1044.89 853.208C1046.41 857.681 1044.67 807.234 1044.35 750.809C1044.21 726.287 1049.91 707.242 1063.15 668.972C1082.39 613.383 1105.78 577.115 1123.98 554.187C1192.16 468.276 1212.33 453.501 1232.33 436.368C1264.49 408.813 1278.6 398.512 1294.37 386.521C1316.06 370.024 1336.02 345.696 1355.68 324.981C1373.88 305.805 1402.76 286.323 1434.69 270.665C1460.81 257.861 1493.43 257.794 1572.84 257.751C1611.84 257.73 1647.63 287.057 1674.76 306.319C1684.96 313.557 1693.62 325.678 1702.3 341.683C1712.88 361.202 1703.14 377.273 1696.97 383.164C1682.74 396.737 1656.94 403.483 1615.49 405.002C1591.06 405.896 1535.65 359.557 1494.65 309.893C1480.46 292.698 1477.73 258.231 1470.04 210.631C1462.34 163.03 1456.95 101.263 1455.65 65.216C1454.35 29.169 1457.31 20.7142 1460.36 12.0033"
        stroke={stroke}
        strokeWidth={strokeWidth}
        strokeLinecap="round"
      />
    </svg>
  );
}