"use client";

import React, { useEffect, useRef } from "react";

interface AuthWaveVectorProps {
  stroke?: string;
  strokeWidth?: number;
  duration?: number; // segundos
  animate?: boolean;
  className?: string;
}

export function WaveVector({
  stroke = "#FFCD6C",
  strokeWidth = 8,
  duration = 4,
  animate = true,
  className,
}: AuthWaveVectorProps) {
  const pathRef = useRef<SVGPathElement | null>(null);

  useEffect(() => {
    if (!animate || !pathRef.current) return;

    const path = pathRef.current;
    const length = path.getTotalLength();

    path.style.strokeDasharray = `${length}`;
    path.style.strokeDashoffset = `${length}`;

    // force layout
    path.getBoundingClientRect();

    path.style.transition = `stroke-dashoffset ${duration}s ease`;
    path.style.strokeDashoffset = "0";
  }, [animate, duration]);

  return (
    <svg
      viewBox="0 0 809 643"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
    >
      <path
        ref={pathRef}
        d="M4 638.52C4 632.603 5.01935 612.978 6.93884 594.731C9.08477 574.331 32.9549 525.152 47.1612 500.746C57.9723 482.173 78.3628 480.491 90.138 480.609C104.84 480.757 113.003 495.616 122.668 507.743C131.821 519.227 136.587 546.942 141.255 568.943C142.521 574.91 142.987 589.756 143.119 607.143C143.158 612.255 143.281 609.832 143.505 607.301C144.492 596.16 145.588 581.915 147.106 562.918C150.301 522.928 153.791 505.967 157.283 496.492C158.959 491.945 168.567 491.795 178.195 492.175C190.18 492.648 199.096 501.556 206.06 510.537C214.608 521.56 218.332 542.251 223.524 565.697C227.684 584.483 231.174 592.015 232.322 597.955C232.859 600.738 233.686 602.97 235.51 600.409C249.082 581.348 253.962 563.957 262.946 552.085C270.462 542.152 283.447 535.698 301.2 528.503C319.581 521.054 346.67 528.392 365.56 541.415C372.005 545.858 374.85 550.41 376.756 554.993C378.594 559.413 378.462 566.504 377.077 572.931C376.578 575.244 372.896 574.021 370.374 572.774C360.845 568.062 356.099 558.662 352.678 549.242C350.987 544.583 349.891 501.287 347.809 438.01C346.677 403.589 352.412 381.387 358.52 365.503C361.639 357.392 368.956 353.022 375.239 349.869C384.193 345.376 401.274 344.758 418.613 344.682C436.571 344.603 448.928 368.776 471.636 414.789C487.937 447.821 485.551 478.941 486.491 518.228C486.883 534.614 489.567 549.001 491.103 561.785C491.543 565.447 491.67 569.84 491.783 570.314C492.502 573.325 491.679 539.363 491.528 501.377C491.462 484.868 494.153 472.047 500.408 446.283C509.494 408.86 520.54 384.443 529.133 369.008C561.333 311.171 570.857 301.224 580.301 289.69C595.491 271.14 602.154 264.205 609.6 256.132C619.843 245.027 629.273 228.648 638.557 214.702C647.15 201.793 660.786 188.677 675.87 178.136C688.204 169.516 703.606 169.471 741.111 169.442C759.525 169.428 776.431 189.172 789.243 202.139C794.058 207.012 798.15 215.172 802.248 225.947C807.245 239.087 802.644 249.906 799.728 253.872C793.011 263.01 780.824 267.551 761.249 268.574C749.715 269.176 723.548 237.98 704.185 204.545C697.481 192.969 696.192 169.766 692.56 137.72C688.927 105.675 686.379 64.0921 685.765 39.8247C685.151 15.5572 686.549 9.86535 687.989 4.00098"
        stroke={stroke}
        strokeWidth={strokeWidth}
        strokeLinecap="round"
      />
    </svg>
  );
}